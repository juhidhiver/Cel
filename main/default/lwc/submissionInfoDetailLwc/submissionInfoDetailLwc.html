<!--
  @File Name          : submissionInfoDetailLWC.html
  @Description        : 
  @Author             : ChangeMeIn@UserSettingsUnder.SFDoc
  @Group              : 
  @Last Modified By   : ChangeMeIn@UserSettingsUnder.SFDoc
  @Last Modified On   : 6/12/2020, 5:43:06 PM
  @Modification Log   : 
  Ver       Date            Author      		    Modification
  1.0    3/26/2020   ChangeMeIn@UserSettingsUnder.SFDoc     Initial Version
-->
<template>
  <lightning-record-edit-form
    object-api-name="Opportunity"
    record-id={oppId}
    onsuccess={handleSuccess}
    onsubmit={handleSubmit}
  >
    <template if:true={sectionList}>
      <div class="mainTab">
        <template if:true={isEditForm}>
          <div class="slds-text-align_center">
            <lightning-button class="slds-m-top_small" variant="brand" onclick={handleSave} name="handleSave" label="Save">
            </lightning-button>
          </div>
        </template>
        <div class="sectionTab">
          <lightning-accordion
            active-section-name={mainActiveSections}
            allow-multiple-sections-open
          >
            <template for:each={sectionList} for:item="section">
              <lightning-accordion-section
                name={section.mainSectionTitle}
                label={section.mainSectionTitle}
                key={section.mainSectionTitle}
                class="mainSection"
              >
                <div class="slds-grid slds-wrap">
                  <lightning-layout horizontal-align="space" vertical-align="top" multiple-rows="true">
                    <template
                      for:each={section.mainSectionFields}
                      for:item="field"
                    >
                    <lightning-layout-item key={field.sourceFieldApi} alignment-bump="right" flexibility="no-flex" 
                    size="12" small-device-size="6" medium-device-size="6" padding="horizontal-small"
                    large-device-size="6" class="clearpaddingtop">
                        <template if:false={isEditForm}>
                          <div
                            class="slds-form-element slds-form-element_edit slds-form-element_readonly slds-hint-parent"
                          >
                            <div class="slds-form-element__control">
                              <div class="slds-form-element__static">
                                <lightning-output-field
                                  field-name={field.sourceFieldApi}
                                ></lightning-output-field>
                                
                              </div>
                              <div class="slds-button slds-button_icon slds-button__icon_hint">
                                <lightning-button-icon
                                  icon-name="utility:edit"
                                  onclick={handleEditClick}
                                  variant="bare"
                                  alternative-text="Edit"
                                  title="Edit"
                                >
                                </lightning-button-icon>
                              </div>
                            </div>
                          </div>
                        </template>
                        <template if:true={isEditForm}>
                          <!-- <lightning-input-field
                            name={field.sourceFieldApi}
                            field-name={field.sourceFieldApi}
                            onchange={handleChangeInputValue}
                          >
                          </lightning-input-field>
                          AAA -->
                          <c-generate-element-lwc onhandlelookupchildselection={handleLookUpChildSelection}
                                                  object-name={field.sourceObject} 
                                                  object-lookup-to={field.lookupTo}
                                                  field-name={field.sourceFieldApi} format={field.format}
                                                  field-value={field.value} 
                                                  label={field.sourceFieldLabel}>
                            </c-generate-element-lwc>
                        </template>
                      </lightning-layout-item>
                    </template>
                  </lightning-layout>
                </div>
              </lightning-accordion-section>
            </template>
          </lightning-accordion>
        </div>
      </div>
    </template>
    
    <footer class="slds-modal__footer">
      <table style="width:100%">
        <tr>
          <th class="align_left"> 
            <lightning-button class="slds-m-top_small" variant="brand" name="Previous" label="< PREVIOUS:Insured Info">
            </lightning-button>
          </th>
          <th class="align_center">
            <template if:true={isEditForm}>
              <lightning-button class="slds-m-top_small" variant="brand" onclick={handleSave} name="handleSave" label="Save">
              </lightning-button>
            </template>
          </th> 
          <th class="align_right" >
            <lightning-button class="slds-m-top_small" variant="brand" name="Next" label="NEXT:Underwriter Analysis >">
            </lightning-button>
          </th>
        </tr>
      </table>
      <!-- <div class="">
        <div class="slds-float_left button-class">
          <lightning-button class="slds-m-top_small" variant="brand" name="Previous" label="< PREVIOUS:Insured Info">
          </lightning-button>
        </div>

        <template if:true={isEditForm}>
          <div class="align_center button-class">
            <lightning-button class="slds-m-top_small" variant="brand" onclick={handleSave} name="handleSave" label="Save">
            </lightning-button>
          </div>
        </template>

        <div class="button-class">
          <lightning-button class="slds-m-top_small" variant="brand" name="Next" label="NEXT:Underwriter Analysis >">
          </lightning-button>
        </div>
      </div> -->
    </footer>
  </lightning-record-edit-form>
  <template if:false={sectionList}>{error}</template>
</template>